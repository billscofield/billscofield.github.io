---
layout: post
---

# VI
ed -> ex -> vi -> vim

## 基于单词的移动
* 什么是单词
    * 单词：由字母、数字、下划线 或其他非空白字符序列组成。
        * 字母、数字、下划线可以组成一个单词
        * 其他非空白字符序列单独成为一个单词
        * 连续的其他非空白字符序列组成一个单词
        * 字母、数字、下划线 和 其他非空白字符序列 不组成一个单词
    * 字串：由非空白字符序列组成。
        * 都以空白字符分隔。 
    * w: forword
    * b: backword
        1. de : [ ]
        1. dge: [ ]

        1. db : [ ) ,文字流的顺序，和光标处的字符
        1. dw : [ )

hello there nice to meet you

## 修改
从进入插入模式起，到返回普通模式为止，Vim会记录每一个按键操作。

插入模式时，上下左右键会产生一个新的撤销块。

## Basics
l:一个字符
aw:一个单词
ap:一个段落

g~:反转大小写
gu:转换为小写
gU:转换为大写

操作符 + 动作命令 = 操作

```
dl, daw, dap, g~l,guaw, guap, gUaw, gUap
```

当一个操作命令被连续调用两次时，它会作用于当前行。

```
dd, cc, yy, >>, 
g比较特殊，既可以 
gugu, gUgU, g~g~,也可以 guu, gUU, g~~
```


0:绝对行首
^:行首第一个非空白字符
$:绝对行尾

d： dl==x
x：
c：先删除内容，并转换为输入模式,还需配合l
s：删除光标所在字符，并进入插入模式,等价于 cl

cc:删除一整行，并进入插入模式

C: c$ [ ]
S:等价于 ^C,即 ^c$,即删除一整行，并进入插入模式

cl:删除光标下的那一个字符,并进入插入模式。
ch:删除光标前的那一个字符,并进入插入模式。
cj:
ck:
c^:从光标处一直删除到^,并进入插入模式。
c2w:

dl:等价于x
dh:删除光标前的那一个字符，留在普通模式。
dj:
dk:
d^:从光标处一直删除到^。
d2w:

J:将当前行和下一行连接在一起。


## 查找
* 在行内查找：f[char] / t[char]
    * f:光标定位到该 char
    * t:光标定位到该 char 前一个字符
    * 下一个：“；” 
    * 上一个：“，”

    ```
    hello there, how are you
    yt,

    ```

* 文档内查找
    * 下一处：/pattern&lt;CR&gt;
    * 上一处：？pattern&lt;CR&gt;
* 查找光标所在处的单词
    * "\*"
    * 下一个: n
    * 上一个: N

## 数学
* ctrl + a:加运算
* ctrl + x:减运算

* 不带次数时，加减1

    ```
    <C-a>
    10<C-a>

    this is 007
    模式0开头是8进制，set noformats= ，更改为10进制
    ```

* 如果光标不在数字上，Ctrl+a 会在当前行正向查找一个数字 

* 随时随地做运算，表达式寄存器=
    * 插入模式中，输入 ctrl + r + = 访问表达式寄存器
    * 然后输入表达式
    * CR

## 插入-普通模式
* 插入模式下及时更正错误
    * Ctrl + h :删除前一个字符
    * Ctrl + w :删除前一个单词
    * Ctrl + u :删除至绝对行首

* 返回至普通模式
    1. ESC
    1. Ctrl + [

* 返回插入-普通模式

    插入模式执行一个普通模式命令

    插入模式下 Ctrl + o 

    ```
    zz:重新绘制屏幕，将当前行显示在窗口正中。
    Ctrl + o + zz,从而不离开插入模式
    ```

## 可视模式
有3种可视模式
1. 面向字符的可视模式 v
1. 面向行的可视模式 V
1. 面向列块的可视模式 ctrl v

gv:重选上次的高亮选取，如果上次的选取被删除了，可能有坑

o:切换高亮选区的两端，以便重新调整高亮选区

可视模式下的 U 等效于 普通模式下的 gU

vit:选择标签里的内容

    ```
    <a href="#">one</a>
    <a href="#">two</a>
    <a href="#">three</a>
    ```
    vitU 和 gUit 的区别

删除操作会同时影响所有被选中的行，但插入操作只会影响顶行（ESC 返回到普通模式 就全部影响了）

    ```
    aaayouaaaa
    bbbyoubbbbb
    cccyouccccccc
    ```
长短不以恶高亮块后添加文本

```
var foo = 1
var bar = 'a'
var foobar = foo + bar

ctrl + v jj$
A;
ctrl [  
```
在可视模式中，I A 把光标置于选取的开头和结尾




